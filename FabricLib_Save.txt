  //%attributes = {"lang":"en"} comment added and reserved by 4D.
C_TEXT($change)

If (Not(Is new record([FabricLibrary])))
	If (Old([FabricLibrary]ArticleNumber)#[FabricLibrary]ArticleNumber)
		$change:="Article number changed from "+Old([FabricLibrary]ArticleNumber)+" to "+[FabricLibrary]ArticleNumber+"; "
	End if 
	If (Old([FabricLibrary]FabricName)#[FabricLibrary]FabricName)
		$change:=$change+"Fabric name changed from "+Old([FabricLibrary]FabricName)+" to "+[FabricLibrary]ArticleNumber+"; "
	End if 
	If (Old([FabricLibrary]FiberContent)#[FabricLibrary]FiberContent)
		$change:=$change+"Article number changed from "+Old([FabricLibrary]FiberContent)+" to "+[FabricLibrary]FiberContent+"; "
	End if 
	If (Old([FabricLibrary]WashingInstructions)#[FabricLibrary]WashingInstructions)
		$change:=$change+"Article number changed from "+Old([FabricLibrary]WashingInstructions)+" to "+[FabricLibrary]WashingInstructions+"; "
	End if 
	If ($change#"")
		$change:=$change+"by "+Current user+" on "+String(Current date(*))+" at "+String(Current time(*))+Char(13)+Char(13)
		[FabricLibrary]History:=$change+[FabricLibrary]History
	End if 
End if 
SAVE RECORD([FabricLibrary])
